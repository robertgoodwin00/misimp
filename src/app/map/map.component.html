
<style>
    #map {
        width:560px; 
        max-height:556px;
        /*background-color:yellow; */
        border:1px; 
        border-style:solid; 
        border-color:orange;
        padding-top:4px;
        overflow:hidden;

    }

    .cell-row {
        padding: 0px;
        margin: -4px 0px -4px 0px;
        
        border: 0px;
        border-color: black;
        border-style: solid;

        display: inline-block;
        /*background-color: red;*/

        width: 80px;
        height: 80px;
    }

    .cell-column {
        padding: 0px;
        margin: 0px;
        
        border: 0px;
        border-color: black;
        border-style: solid;

        display: inline-block;
        /*background-color: green;*/

        width: 80px;
        height: 80px;
        
    }

    .connector {
        stroke: #ddeeff;
        stroke-width: 3px;
        /*stroke-linecap: round;*/
    }

    /*
    .foo {
        transform-origin: center;
        transform: scale(1.1);
    }
    
    
    .is-active .foo {
        animation: pulse 5s;
    }

    @keyframes pulse {
        20% {
            transform: scale(0.9);
        }
   
    }*/

    /*
    .animated {
        -webkit-animation-duration: 1s;
        animation-duration: 1s;
    }

    @keyframes pulse {
        from {
            -webkit-transform: scale3d(1, 1, 1);
            transform: scale3d(1, 1, 1);
        }  50% {
            -webkit-transform: scale3d(1.05, 1.05, 1.05);
            transform: scale3d(1.05, 1.05, 1.05);
        }  to {
            -webkit-transform: scale3d(1, 1, 1);
            transform: scale3d(1, 1, 1);
        }
    }
    */
    

</style>


<div id="map" style="display:block;">
    <div class="cell-column" *ngFor="let item of [].constructor(nodes_per_row); let x = index" >
        <div class="cell-row" *ngFor="let item of [].constructor(nodes_per_row); let y = index " >
            <div class="foo" >
                <svg width="80" height="80" viewBox="0 0 80 80">
                    <!--<rect  x="0" y="0" width="100" height="100" fill="#bbb"/>-->
                
                    
                    <line *ngIf="isNode(x,y) && canGo(x,y,0)" class="connector" x1="40" y1="40" x2="0" y2="0"  />
                    <line *ngIf="isNode(x,y) && canGo(x,y,1)" class="connector" x1="40" y1="40" x2="80" y2="80"  />
                    <line *ngIf="isNode(x,y) && canGo(x,y,2)" class="connector" x1="40" y1="40" x2="80" y2="0"  />
                    <line *ngIf="isNode(x,y) && canGo(x,y,3)" class="connector" x1="40" y1="40" x2="0" y2="80"  />

                    <circle *ngIf="isNode(x,y)" cx="40" cy="40" r="36" fill="#00ffff" (click)="circleClick(x,y)">
                        <animate id="{{'circle-' + x + '-' + y}}" 
                            animateTransform attributeName="r" 
                            begin="indefinite" dur=".2s" from="36" to="44"  />
                        
                    </circle>

                    <circle *ngIf="playerHere(x,y)" cx="40" cy="40" r="12" fill="#f11" ></circle>
                    
                    <defs>
                        <clipPath id="circleView">
                            <circle cx="40" cy="40" r="36" fill="#FFFFFF" />
                        </clipPath>
                    </defs>
                    <!--<image *ngIf="isNode(x,y) && hasEvent(x,y)" (click)="circleClick(x,y)" 
                        
                        x="-50"
                        y="-50"
                        width="200" 
                        height="200" 

                        clip-path="url(#circleView)"
                        [attr.xlink:href]="getEventPath(x,y)"
                    />-->
                    <image *ngIf="isNode(x,y) && hasEvent(x,y)" (click)="circleClick(x,y)"
                        clip-path="url(#circleView)"
                        [attr.xlink:href]="getEventPath(x,y)"
                    />
                </svg>
            </div>
            
        </div>
    </div>
</div>

